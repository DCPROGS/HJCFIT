sudo: required
dist: trusty

language: python

addons:
  apt:
    packages:
        - swig
        - libatlas-dev
        - libatlas-base-dev
        - liblapack-dev
        - gfortran
        - libgmp-dev
        - libmpfr-dev
        - ccache
        - libfreetype6-dev
        - libpng-dev
        - zlib1g-dev
        - texlive-fonts-recommended
        - doxygen
        - texlive-latex-base
        - texlive-latex-extra
        - texlive-fonts-recommended
        - texlive-latex-recommended

matrix:
  include:
    - python: 2.7
    - python: 3.5

# mscgen is not currently allowed in travis so we explicitly sudo it
# See https://github.com/travis-ci/apt-package-whitelist/issues/2243
install:
    - |
        sudo apt-get install mscgen
        pip install --upgrade pip
        pip install --upgrade wheel
        pip install --upgrade setuptools
        pip install numpy
        pip install scipy
        pip install behave
        pip install sphinx sphinxcontrib-bibtex Breathe


script:
  - |
        mkdir build
        cd build
        cmake .. -DCMAKE_INSTALL_PREFIX=/home/travis/virtualenv/python${TRAVIS_PYTHON_VERSION}/
        make
        ctest --output-on-failure
        make install
        make documentation
